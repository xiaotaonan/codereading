# 前言

我们是程序员。 我们的工作（在许多情况下是我们的热情）是通过编写代码来实现事情。 我们无法用大量的图表、详细的项目进度表、四英尺高的设计文档来满足用户的要求。 这些都是愿望——我们想要实现的愿望的表达。 不，我们通过编写代码来交付：代码就是现实。

这就是我们被教导的。 看起来很合理。 我们的工作就是写代码，所以我们需要学习如何写代码。 大学课程教我们编写程序。 培训课程告诉我们如何针对新的库和 API 进行编码。 这是该行业最大的悲剧之一。

因为学习编写优秀代码的方法是阅读代码。 很多代码。 高质量代码，低质量代码。 汇编代码，Haskell 代码。 万里之外的陌生人写的代码，上周我们自己写的代码。 因为除非我们这样做，否则我们就会不断地重新发明已经做过的事情，重复过去的成功和错误。
我想知道有多少伟大的小说家从未读过别人的作品，有多少伟大的画家从未研究过别人的笔触，有多少熟练的外科医生从未通过观察同事的肩膀来学习，有多少767机长没有第一次坐在副驾驶座位上 看看它是如何真正完成的。

但这正是我们期望程序员所做的。 “本周的作业是写……”我们教开发人员语法和结构的规则，然后我们期望他们能够编写相当于一本伟大小说的软件。
讽刺的是，现在是阅读代码的最佳时机。 感谢开源社区的巨大贡献，我们现在有数十亿字节的源代码漂浮在网络上等待被阅读。 选择任何语言，您都可以找到源代码。 选择一个问题域，就会有源代码。 选择一个级别，从微代码到高级业务功能，您将能够查看大量源代码。

阅读代码很有趣。 我喜欢阅读别人的代码。 我读它是为了学习技巧和研究陷阱。 有时我会遇到小而珍贵的宝石。 我仍然记得当我在 PDP-11 汇编器中遇到二进制到八进制转换例程时所获得的乐趣，该例程设法在没有循环计数器的情况下在紧密循环中输出六个八进制数字。

我有时会阅读叙述性的代码，就像你在长途飞行之前在机场拿起的一本书。 我希望能从巧妙的情节和意想不到的对称性中得到乐趣。 Jame Clark 的 gpic 程序（他的 GNU groff 包的一部分）是此类代码的一个很好的例子。 它以紧凑而优雅的结构实现了一些表面上非常复杂的东西（一种声明性的、与设备无关的绘图语言）。 离开时我受到了启发，尝试将自己的代码构造得如此整洁。

有时我会更批判性地阅读代码。 这个进展比较慢。 当我阅读时，我会问自己一些问题，例如“为什么要这样写？” 或“作者的什么背景会导致她做出这样的选择？” 我经常处于这种模式，因为我正在检查代码中的问题。 我正在寻找可能为我提供指导的模式和线索。 如果我发现作者未能在代码的一部分中锁定共享数据结构，我可能会怀疑其他地方也可能存在同样的情况，然后想知道这个错误是否可以解释我所看到的问题。 我也会用我发现的不协调之处来双重检查我的理解； 我经常发现我认为有问题的地方，但仔细检查后发现它是完美的代码。 这样我就学到了一些东西。

事实上，代码阅读是消除程序中问题最有效的方法之一。 本书的评论者之一罗伯特·格拉斯 (Robert Glass) 表示：“通过正确使用（代码）检查，可以在软件产品第一次测试出现之前就消除 90% 以上的错误。在同一篇文章中，他引用了一项研究，该研究表明“以代码为中心的检查员发现的错误比以流程为中心的检查员多 90%”。 有趣的是，在阅读本书中引用的代码片段时，我遇到了一些错误和一些可疑的编码实践。 这些是在全球数以万计的站点上运行的代码中存在的问题。 本质上没有一个是关键的，但练习表明我们编写的代码总是有改进的空间。 代码阅读技能显然具有很大的实际好处，如果您曾经与那些显然不知道如何阅读代码的人一起进行代码审查，那么您已经知道这一点。

  http://www.stickyminds.com/se/S2587.asp

然后是维护，它是软件开发的丑陋表弟。 没有准确的统计数据，但大多数研究人员同意
我们在软件上花费的时间有一半以上用于查看现有代码：添加新功能、修复错误、将其集成到新环境中等等。 代码阅读能力至关重要。 10万行的程序有一个bug，你如何开始？ 你怎么知道你在看什么？ 您如何评估您正在考虑做出的改变的影响？

由于所有这些原因以及更多原因，我喜欢这本书。 它的核心是务实的。 它没有采取抽象的学术方法，而是关注代码本身。 它分析了数百个代码片段，指出技巧、陷阱和（同样重要的）习语。 它讨论了其环境中的代码，并讨论了该环境如何影响代码。 它强调了代码阅读器行业的重要工具，从 grep 和 find 等常见工具到更奇特的工具。 它强调了工具构建的重要性：编写代码来帮助您阅读代码。 而且，为了实用，它附带了它讨论的所有代码，可以在 CD-ROM 上方便地交叉引用。

这本书应该包含在每门编程课程中，并且应该放在每个开发人员的书架上。 如果作为一个社区，我们更加关注代码阅读的艺术，我们将节省时间和减少付出。 我们将节省行业资金。 当我们这样做的时候，我们会得到更多的乐趣。

Dave Thomas
务实的程序员，LLC
http://www.pragmaticprogrammer.com
